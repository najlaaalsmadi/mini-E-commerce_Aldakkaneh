@model IEnumerable<mini_E_commerce_Aldakkaneh.Models.Cart>

@{
    ViewBag.Title = "قائمة المشتريات";
    var totalSum = 0M;
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
    body {
        background-color: #212121; /* Blackish background */
        color: #f5f5f5; /* Off-white text */
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .table thead th {
        background-color: #6a1b9a; /* Dark Purple */
        color: white;
        border: none;
    }

    .table td, .table th {
        vertical-align: middle;
        text-align: center;
        border: none;
    }

    .table-striped tbody tr:nth-of-type(odd) {
        background-color: #eaeaea; /* Light Grey for contrast */
    }

    .btn-custom {
        background-color: #9c27b0; /* Purple */
        color: white;
        padding: 5px 15px;
        border: none;
        border-radius: 20px;
        transition: background-color 0.3s ease;
    }

        .btn-custom:hover {
            background-color: #6a1b9a; /* Darker Purple */
        }

    .btn-danger {
        background-color: #333; /* Dark Grey */
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        border: none;
    }

        .btn-danger:hover {
            background-color: #000; /* Black */
        }

    .btn-dark {
        background-color: #212121; /* Black */
        color: white;
        border: none;
        border-radius: 20px;
        padding: 10px 20px;
        transition: background-color 0.3s ease;
    }

        .btn-dark:hover {
            background-color: #000; /* Black */
        }

    .btn-pay {
        background-color: #6a1b9a; /* Dark Purple */
        color: white;
        border: none;
        border-radius: 20px;
        padding: 10px 20px;
        transition: background-color 0.3s ease;
    }

        .btn-pay:hover {
            background-color: #9c27b0; /* Purple */
        }

    img.product-img {
        width: 80px;
        height: auto;
        border-radius: 10px;
    }

    .total-row th {
        font-size: 1.2rem;
        background-color: #6a1b9a; /* Dark Purple */
        color: white;
    }

    h2 {
        font-weight: bold;
        color: #f5f5f5; /* Off-white text */
    }
</style>

<div class="container mt-5">
    <h2 class="text-center mb-4">قائمة المشتريات</h2>
    <div class="table-responsive">
        <table class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>المنتج</th>
                    <th>التصنيف</th>
                    <th>الصورة</th>
                    <th>الكمية</th>
                    <th>السعر للوحدة</th>
                    <th>السعر الإجمالي</th>
                    <th>تعديل الكمية</th>
                    <th>حذف</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    var itemTotal = item.Product.price * item.quantity;
                    totalSum += itemTotal;

                    <tr>
                        <td>@item.description</td>
                        <td>@item.Product.Category.name</td>
                        <td><img src="../../imges/@item.imgprodect" alt="Product Image" class="product-img"></td>
                        <td>@item.quantity</td>
                        <td>@item.Product.price دينار</td>
                        <td>@itemTotal دينار</td>
                        <td>@Html.ActionLink("تعديل الكمية", "Edit", new { id = item.cart_id }, new { @class = "btn btn-custom" })</td>
                        <td>@Html.ActionLink("حذف", "Delete", new { id = item.cart_id }, new { @class = "btn btn-danger" })</td>
                    </tr>
                }
            </tbody>
            <tfoot>
                <tr class="total-row">
                    <th colspan="5">المجموع الكلي</th>
                    <th colspan="1">@totalSum دينار</th>
                    <th colspan="2" class="text-center">
                        <a href="@Url.Action("Checkout", "Carts", new { totalSum = totalSum })" class="btn btn-dark">إتمام عملية الدفع</a>
                    </th>
                </tr>
            </tfoot>
        </table>
    </div>
</div>
